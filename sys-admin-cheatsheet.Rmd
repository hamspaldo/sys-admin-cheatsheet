---
title: "RStudio Team System Admin :: <b>CHEATSHEET</b>"
author: "Andrie de Vries"
date: "`r Sys.Date()`"
output:
  html_document:
    toc: true
    toc_collapse: true
    toc_float: true
    toc_depth: 4
css: include/styles.css

---

<!-- ribbon from https://codepo8.github.io/css-fork-on-github-ribbon/ -->

<style>#forkongithub a{background:#FCECCC;color:#000;text-decoration:none;font-family:arial,sans-serif;text-align:center;font-weight:bold;padding:5px 40px;font-size:1rem;line-height:2rem;position:relative;transition:0.5s;}#forkongithub a:hover{background:#DFECF7;color:#000;}#forkongithub a::before,#forkongithub a::after{content:"";width:100%;display:block;position:absolute;top:1px;left:0;height:1px;background:#fff;}#forkongithub a::after{bottom:1px;top:auto;}@media screen and (min-width:1000px){#forkongithub{position:absolute;display:block;top:0;right:0;width:200px;overflow:hidden;height:200px;z-index:9999;}#forkongithub a{width:200px;position:absolute;top:45px;right:-45px;transform:rotate(45deg);-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);-moz-transform:rotate(45deg);-o-transform:rotate(45deg);box-shadow:4px 4px 10px rgba(0,0,0,0.8);}}</style><span id="forkongithub"><a href="https://github.com/sol-eng/sys-admin-cheatsheet">Fork me on GitHub</a></span>


## Documentation

Topic                               | Link
:----                               | :-------------
General                             | https://docs.rstudio.com/
Installing R                        | https://docs.rstudio.com/resources/install-r/
Installing Python                   | https://docs.rstudio.com/resources/install-python/
RStudio Server admin guide          | https://docs.rstudio.com/ide/server-pro/
RStudio Connect admin guide         | https://docs.rstudio.com/connect/admin/
RStudio Package Manager admin guide | https://docs.rstudio.com/rspm/admin/
Pro Drivers                         | https://docs.rstudio.com/pro-drivers/


## Installing R

### Install R from pre-compiled binaries

Recommended best practise is to install R from pre-compiled binaries

https://docs.rstudio.com/resources/install-r/

For example, on Ubuntu 18.04 for R version 3.6.1.

```sh
sudo sed -i.bak "/^#.*deb-src.*universe$/s/^# //g" /etc/apt/sources.list
sudo apt-get update
sudo apt-get install gdebi-core

export R_VERSION=3.6.1

curl -O https://cdn.rstudio.com/r/ubuntu-1804/pkgs/r-${R_VERSION}_1_amd64.deb
sudo gdebi r-${R_VERSION}_1_amd64.deb
```

This script installs into `/opt/R/...`

Verify installation:

```sh
/opt/R/${R_VERSION}/bin/R --version
```


## RStudio Server Pro

Admin guide: https://docs.rstudio.com/ide/server-pro/

### Starting, stopping and restarting

Running the verify installation command:

```sh
sudo rstudio-server stop
sudo rstudio-server verify-installation
sudo rstudio-server start
```

To Restart

### Deactivating a license
    
Deactivation tool: http://apps.rstudio.com/deactivate-license/



## Pro Drivers 

Documentation overview: https://docs.rstudio.com/pro-drivers/

Driver locations:

```sh
cat /etc/odbc.ini 
cat /etc/odbcinst.ini
```



## Troubleshooting

### Troubleshooting R

Almost all RStudio products depend on R being installed successfully to run.
  
* Look for errors related to R in the server logs
  
Can R be launched manually and can the user's code be run in R without any errors?

How was R installed? 

* From source or [pre-compiled binaries](https://docs.rstudio.com/resources/install-r/)? If so, were all correct flags and capabilities set?  

```sh
grep configure R_HOME/etc/Makeconf
```
    
Are all necessary dependencies installed? 


```sh
apt-get build-dep r-base
yum-builddep R
```

Are the permissions set correctly to allow `r-x` by all?      

```sh
namei -l /path/to/R
```

Are there multiple versions of R on the system?

```sh
apt-get install mlocate
updatedb
locate libR.so
```


### Troubleshooting configuration

Look for any errors in the startup.  You can view the live log during startup using:
  
```sh
tail -f /path/to/log
```

Read through the admin guides and make sure you have the correct formatting

Make sure you're on the right version of the product compared to the admin guide!


### Troubleshooting authentication

Difficult for RStudio Support to troubleshoot as it depends on external configuration values unknown to us.

Does it work outside of the RStudio product?

* Often possible to copy over working setup from other systems or services.
* For RStudio Server Pro, the`pamtester` utility lets you test outside RStudio systems.
  
```sh
sudo /usr/lib/rstudio-server/bin/pamtester \
--verbose rstudio <username> authenticate
```
  
Check server log files including `access.log` files.

Check connections to any external authentication providers

* Kerberos, Active Directory, etc.


## General Linux tips 

### OS version

What OS are you using?

```sh
cat /etc/*-release
```

or

```sh
uname -a
```

### Export environment variable to PATH

```sh
export PATH=$PATH:/opt/R/3.5.0/bin
```



